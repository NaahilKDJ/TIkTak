{% extends "base.html" %}

{% block content %}
<div class="columns">
    <div class="column is-2">
        {% include 'sideMenu.html' %}
    </div>
    
    <div class="column">
        <div class="box">
            <h1 class="title">{% if form.instance.pk %}Edit{% else %}New{% endif %} Post</h1>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="field">
                    <label class="label">{{ form.title.label }}</label>
                    <div class="control">
                        {{ form.title }}
                    </div>
                    {% if form.title.errors %}
                        <p class="help is-danger">{{ form.title.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="field">
                    <label class="label">{{ form.description.label }}</label>
                    <div class="control">
                        {{ form.description }}
                    </div>
                    {% if form.description.errors %}
                        <p class="help is-danger">{{ form.description.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="field">
                    <label class="label">Media</label>
                    <div class="file has-name">
                        <label class="file-label">
                            {{ form.media }}
                            <span class="file-cta">
                                <span class="file-icon">
                                    <i class="fas fa-upload"></i>
                                </span>
                                <span class="file-label">
                                    Choose a fileâ€¦
                                </span>
                            </span>
                            <span class="file-name" id="filename">
                                No file selected
                            </span>
                        </label>
                    </div>
                    {% if form.media.errors %}
                        <p class="help is-danger">{{ form.media.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="field mt-5">
                    <div class="control">
                        <button type="submit" class="button is-primary">Save Post</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    const fileInput = document.querySelector('input[type=file]');
    const fileName = document.querySelector('#filename');
    
    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            fileName.textContent = fileInput.files[0].name;
        } else {
            fileName.textContent = 'No file selected';
        }
    });
</script>
{% endblock %} 